<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Selamat Ulang Tahun!</title>
  <style>
    :root{
      --bg1:#ff9a9e; --bg2:#fad0c4; --card:#ffffff; --primary:#ff4d6d; --muted:#666;
    }
    [data-theme="dark"]{
      --bg1:#0f1724; --bg2:#071027; --card:#0b1220; --primary:#ff7aa2; --muted:#bfc7d6
    }
    *{box-sizing:border-box}
    body{
      margin:0;font-family:Inter, sans-serif; 
      background:linear-gradient(120deg,var(--bg1),var(--bg2)); 
      min-height:100vh;overflow-x:hidden
    }
    [data-theme="dark"],[data-theme="dark"] *{color:white!important}
    .stars{position:fixed;inset:0;background-image:radial-gradient(white 1px,transparent 1px);background-size:3px 3px;opacity:0.06;z-index:0}
    .container{position:relative;z-index:2;max-width:1000px;margin:0 auto;padding:20px}
    header{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{width:56px;height:56px;border-radius:12px;object-fit:cover;border:3px solid rgba(255,255,255,.3)}
    h1{font-size:28px;margin:0;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.4)}
    .controls{display:flex;gap:10px;flex-wrap:wrap}
    .btn{background:var(--primary);color:#fff;border:none;padding:10px 16px;border-radius:999px;cursor:pointer;font-weight:600}
    .btn.ghost{background:transparent;border:1px solid rgba(255,255,255,.3)}
    .hero{display:flex;flex-wrap:wrap;gap:20px;margin-top:20px}
    .hero-left{flex:1;min-width:260px}
    .hero-right{width:320px}
    .card{background:var(--card);padding:16px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.15)}
    .typing{font-size:20px;min-height:36px}
    .profile{display:flex;gap:14px;align-items:center}
    .avatar{width:92px;height:92px;border-radius:14px;object-fit:cover}
    .countdown{display:flex;gap:10px;margin-top:12px;flex-wrap:wrap}
    .count-item{background:rgba(255,255,255,.9);padding:10px;border-radius:10px;min-width:70px;text-align:center}
    [data-theme="dark"] .count-item{background:rgba(255,255,255,.1)}
    .gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;margin-top:14px}
    .gallery-grid img{width:100%;height:250px;object-fit:cover;border-radius:8px;cursor:pointer}
    .lightbox{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;align-items:center;justify-content:center;z-index:60}
    .lightbox img{max-width:90%;max-height:90%;border-radius:10px}
    form{display:flex;flex-direction:column;gap:8px}
    input,textarea{padding:10px;border-radius:8px;border:1px solid rgba(0,0,0,.1)}
    textarea{min-height:80px}
    .messages{display:flex;flex-direction:column;gap:8px;margin-top:12px}
    .msg{background:rgba(255,255,255,.9);padding:10px;border-radius:10px;position:relative}
    [data-theme="dark"] .msg{background:rgba(255,255,255,.1)}
    .msg button{position:absolute;top:8px;right:8px;background:#e74c3c;color:#fff;border:none;padding:4px 8px;border-radius:6px;cursor:pointer;display:none}
    .msg.admin button{display:block}
    .effects{position:fixed;inset:0;z-index:50;pointer-events:none}
    .balloon{
      position:absolute;bottom:-160px;width:80px;height:110px;border-radius:50%/60%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.6),transparent 40%),
                  radial-gradient(circle at 70% 70%, rgba(0,0,0,0.15),transparent 60%), red;
      opacity:0.9;pointer-events:auto;cursor:pointer
    }
    .balloon::after{content:"";position:absolute;bottom:-12px;left:50%;transform:translateX(-50%);
      width:14px;height:12px;background:inherit;clip-path:polygon(50% 0,0 100%,100% 100%)}
    @keyframes floatUp{from{transform:translateY(0)}to{transform:translateY(-120vh)}}
    @keyframes sway{0%,100%{transform:translateX(0)}50%{transform:translateX(30px)}}
    .confetti{position:absolute;width:10px;height:14px;border-radius:2px}

    /* ‚úÖ responsive video */
    .video-wrapper {
      position: relative;
      width: 100%;
      padding-top: 56.25%; /* 16:9 */
      overflow: hidden;
      border-radius: 14px;
      background: #000;
    }
    .video-wrapper video {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      object-fit: contain; /* full video terlihat */
      border-radius: 14px;
    }
  </style>
</head>
<body>
  <div class="stars"></div>
  <div class="effects" id="effects"></div>
  <div class="container">
    <header>
      <div class="brand">
        <img id="fotoProfil" class="logo">
        <h1 id="judul">üéâ Selamat Ulang Tahun!</h1>
      </div>
      <div class="controls">
        <button class="btn ghost" id="darkToggle">üåô Mode Gelap</button>
        <button class="btn" id="startBtn">Mulai Kejutan üéâ</button>
        <button class="btn ghost" onclick="adminLogin()">üîë Login Admin</button>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="hero-left">
          <div class="card">
            <div class="typing" id="typing"></div>
          </div>
        </div>
        <div class="hero-right">
          <div class="card profile">
            <img id="avatar" class="avatar">
            <div class="meta">
              <h2 id="nama"></h2>
              <div><strong>Tanggal Lahir:</strong> <span id="ttl"></span></div>
              <div><strong>Umur:</strong> <span id="umur"></span> tahun</div>
            </div>
          </div>
        </div>
      </section>

      <section style="margin-top:20px">
        <h2>‚è≥ Hitung Mundur Ulang Tahun Berikutnya</h2>
        <div class="countdown" id="countdown"></div>
      </section>

      <section style="margin-top:20px">
        <h2>üì∏ KETUA MAF1A</h2>
        <div class="gallery-grid">
          <img src="inu1.jpg"><img src="inu2.jpg"><img src="inu3.jpg"><img src="inu4.jpg">
        </div>
      </section>

      <section style="margin-top:20px">
        <h2>üé¨ Video Spesial</h2>
        <div class="card video-wrapper">
          <video id="videoEmbed" controls></video>
        </div>
      </section>

      <section style="margin-top:20px">
        <h2>üíå Buku Tamu</h2>
        <form id="guestForm">
          <input id="gName" placeholder="Nama" required>
          <textarea id="gMessage" placeholder="Ucapanmu..." required></textarea>
          <button class="btn" type="submit">Kirim</button>
        </form>
        <div class="messages" id="messages"></div>
      </section>
    </main>
  </div>

  <div class="lightbox" id="lightbox"><img id="lightboxImg"></div>
  <audio id="music" src="happy-birthday.mp3"></audio>
  <audio id="popSound" src="pop.mp3"></audio>

  <script>
    const config={nama:"Muhammad Ibnu Nasution",tanggalLahir:"2002-11-23",fotoProfil:"inu5.jpg",avatar:"inu5.jpg",youtube:"jj.mp4"};
    document.getElementById("nama").innerText=config.nama;
    document.getElementById("ttl").innerText=new Date(config.tanggalLahir).toLocaleDateString();
    document.getElementById("umur").innerText=new Date().getFullYear()-new Date(config.tanggalLahir).getFullYear();
    document.getElementById("fotoProfil").src=config.fotoProfil;
    document.getElementById("avatar").src=config.avatar;
    document.getElementById("videoEmbed").src=config.youtube;

    // Typing
    let txt=`Selamat ulang tahun ${config.nama}! üéÇ Semoga sehat selalu üéâ`, i=0;
    (function type(){if(i<txt.length){document.getElementById("typing").innerHTML+=txt.charAt(i);i++;setTimeout(type,80)}})();

    // Countdown
    function updateCountdown(){let now=new Date();let next=new Date(now.getFullYear(),new Date(config.tanggalLahir).getMonth(),new Date(config.tanggalLahir).getDate());if(next<now)next.setFullYear(next.getFullYear()+1);let diff=next-now;let d=Math.floor(diff/86400000),h=Math.floor(diff/3600000)%24,m=Math.floor(diff/60000)%60,s=Math.floor(diff/1000)%60;document.getElementById("countdown").innerHTML=`<div class="count-item">${d}<div>Hari</div></div><div class="count-item">${h}<div>Jam</div></div><div class="count-item">${m}<div>Menit</div></div><div class="count-item">${s}<div>Detik</div></div>`;}
    setInterval(updateCountdown,1000);updateCountdown();

    // Gallery Lightbox
    document.querySelectorAll(".gallery-grid img").forEach(img=>img.onclick=()=>{document.getElementById("lightbox").style.display="flex";document.getElementById("lightboxImg").src=img.src});
    document.getElementById("lightbox").onclick=()=>{document.getElementById("lightbox").style.display="none"};

    // Guestbook + Admin
    const STORAGE_KEY="guestbook"; 
    const ADMIN_PASSWORD="admin123"; // ganti password rahasiamu

    function isAdmin(){return sessionStorage.getItem("isAdmin")==="true";}
    function adminLogin(){let pass=prompt("Masukkan password admin:");if(pass===ADMIN_PASSWORD){sessionStorage.setItem("isAdmin","true");loadMsg();alert("Login admin berhasil!")}else{alert("Password salah!")}}

    function loadMsg(){
      let arr=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");
      document.getElementById("messages").innerHTML=arr.map((m,i)=>`
        <div class="msg ${isAdmin()?'admin':''}">
          <b>${m.name}</b><br>${m.text}
          ${isAdmin()?`<button onclick="deleteMsg(${i})">Hapus</button>`:""}
        </div>`).join("");
    }

    function saveMsg(m){let arr=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");arr.push(m);localStorage.setItem(STORAGE_KEY,JSON.stringify(arr))}
    function deleteMsg(i){let arr=JSON.parse(localStorage.getItem(STORAGE_KEY)||"[]");arr.splice(i,1);localStorage.setItem(STORAGE_KEY,JSON.stringify(arr));loadMsg();}

    document.getElementById("guestForm").onsubmit=e=>{e.preventDefault();saveMsg({name:gName.value,text:gMessage.value});loadMsg();e.target.reset()}
    loadMsg();

    // Dark mode
    darkToggle.onclick=()=>{if(document.documentElement.getAttribute("data-theme")==="dark"){document.documentElement.removeAttribute("data-theme");darkToggle.textContent="üåô Mode Gelap"}else{document.documentElement.setAttribute("data-theme","dark");darkToggle.textContent="‚òÄÔ∏è Mode Terang"}};

    // Effects
    const effects=document.getElementById("effects");
    function createBalloon(){
      const b=document.createElement("div");
      b.className="balloon";
      const colors=["#ff4d6d","#ffb347","#87ceeb","#77dd77","#cba6f7"];
      b.style.background=`radial-gradient(circle at 30% 30%, rgba(255,255,255,0.6),transparent 40%),radial-gradient(circle at 70% 70%, rgba(0,0,0,0.15),transparent 60%),${colors[Math.floor(Math.random()*colors.length)]}`;
      b.style.left=Math.random()*90+"%";
      let dur=6+Math.random()*6;
      b.style.animation=`floatUp ${dur}s linear forwards, sway 3s ease-in-out infinite`;
      effects.appendChild(b);
      // Pop setelah durasi selesai
      setTimeout(()=>{if(document.body.contains(b))popBalloon(b)},dur*1000-500);
      b.onclick=()=>popBalloon(b);
    }

    function popBalloon(b){
      popSound.currentTime=0;popSound.play();
      for(let i=0;i<12;i++){let c=document.createElement("div");c.className="confetti";c.style.background=["#ff4d6d","#ffb347","#87ceeb","#77dd77","#cba6f7"][Math.floor(Math.random()*5)];c.style.left=b.offsetLeft+"px";c.style.top=b.offsetTop+"px";effects.appendChild(c);let x=(Math.random()-0.5)*200,y=(Math.random()-1)*200;c.animate([{transform:"translate(0,0)",opacity:1},{transform:`translate(${x}px,${y}px)`,opacity:0}],{duration:800,fill:"forwards"});setTimeout(()=>c.remove(),800)}
      b.remove();
    }

    function launchConfetti(count=100){for(let i=0;i<count;i++){let c=document.createElement("div");c.className="confetti";c.style.background=["#ff4d6d","#ffb347","#87ceeb","#77dd77","#cba6f7"][Math.floor(Math.random()*5)];c.style.left=Math.random()*100+"%";c.style.bottom="0";effects.appendChild(c);let x=(Math.random()-0.5)*300,y=-Math.random()*400-200;c.animate([{transform:"translate(0,0)",opacity:1},{transform:`translate(${x}px,${y}px)`,opacity:0}],{duration:2000,fill:"forwards"});setTimeout(()=>c.remove(),2000)}}

    // Start
    startBtn.onclick=()=>{music.play();launchConfetti();setInterval(createBalloon,1500);startBtn.style.display="none"};
  </script>
</body>
</html>
